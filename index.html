<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Move Like Maher — Strength & Mobility Coaching</title>
  <meta name="description" content="Strength and mobility coaching with Maher. Move better. Feel stronger. Train with confidence." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Main CSS -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

<header class="header">
  <div class="container">
    <nav class="nav">
      <a class="brand" href="index.html" style="display:flex; flex-direction:column; line-height:1.05;">
	<span style="font-weight:700;">Move Like Maher</span>
      </a>

      <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <div class="nav-menu">
        <div class="navlinks">
          <a data-nav href="index.html">Home</a>
          <a data-nav href="about.html">About</a>
          <a data-nav href="testimonials.html">Testimonials</a>
          <a data-nav href="pricing.html">Pricing</a>
        </div>

        <a class="button primary" href="work-with-me.html">
          Work with me
        </a>
      </div>

    </nav>
  </div>
</header>

<main>

  <!-- HERO -->
  <section class="hero hero-background">
    <div class="hero-overlay"></div>
    <div class="container">
      <div class="heroCopy">
        <div class="kicker">
          <span class="dot"></span>
          Strength • Mobility • Confidence
        </div>

        <h1>Move like Maher.</h1>

        <p class="heroLead">
          Move better, lift stronger, feel confident.
        </p>

        <div class="heroActions">
          <a class="button primary" href="work-with-me.html">Work with me</a>
          <a class="button" href="pricing.html">Packages</a>
          <a class="button" href="testimonials.html">Client wins</a>
        </div>

        <div style="margin-top:20px" class="rule"></div>

        <p style="margin-top:12px" class="mono">
          Based in San Francisco • In-person + online coaching
        </p>
      </div>
    </div>
  </section>

  <div class="container"><div class="rule"></div></div>

  <!-- THE PROCESS -->
  <section class="section">
    <div class="container">

      <div class="sectionHead">
        <h2>The Process</h2>
      </div>

      <div class="sectionBody">

        <ul class="list">
          <li>
            <span>01</span>
            <div>
              <strong>Intro consult.</strong><br>
              <span style="color:var(--muted)">
                Understanding your goals, movement history, and schedule.
              </span>
            </div>
          </li>

          <li>
            <span>02</span>
            <div>
              <strong>Custom plan.</strong><br>
              <span style="color:var(--muted)">
                Strength and mobility programming built around your needs and setup.
              </span>
            </div>
          </li>

          <li>
            <span>03</span>
            <div>
              <strong>Ongoing training.</strong><br>
              <span style="color:var(--muted)">
                Regular check-ins and form feedback as you progress.
              </span>
            </div>
          </li>

          <li>
            <span>04</span>
            <div>
              <strong>Progress reviews.</strong><br>
              <span style="color:var(--muted)">
                Regular assessments and program updates.
              </span>
            </div>
          </li>
        </ul>

      </div>
    </div>
  </section>

  <div class="container"><div class="rule"></div></div>

  <!-- CLIENT PROGRESS CAROUSEL -->
  <section class="section">
    <div class="container">
      <div class="sectionHead">
        <h2>Client Progress</h2>
      </div>

      <div class="carousel-wrapper">
        <div class="carousel-container">
          <button class="carousel-btn carousel-btn-prev" aria-label="Previous" type="button">
            <span>←</span>
          </button>
          
          <div class="carousel-track-wrapper">
            <div class="carousel-track" id="clientProgressCarousel">
              <!-- Carousel slides will be loaded from testimonials.json -->
            </div>
          </div>

          <button class="carousel-btn carousel-btn-next" aria-label="Next" type="button">
            <span>→</span>
          </button>
        </div>
        
        <div class="carousel-cta">
          <a href="testimonials.html" class="carousel-link-text">View all client stories →</a>
          <div style="margin-top:16px;">
            <a class="button primary" href="work-with-me.html">Work with me</a>
          </div>
        </div>
      </div>
    </div>
  </section>

</main>

<!-- Free Consult Popup -->
<div id="welcome-popup" class="modal" style="display:none;">
  <div class="modal-content">
    <button class="modal-close" onclick="closeWelcomePopup()" aria-label="Close">×</button>
    <div class="modal-header">
      <h2>Book a free consult</h2>
    </div>
    <p>Ready to move better? Let's chat about your goals and see if we're a good fit.</p>
    <div style="display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:20px;">
      <a class="button primary" href="work-with-me.html" onclick="closeWelcomePopup()">Book now</a>
      <button class="button" onclick="closeWelcomePopup()">Maybe later</button>
    </div>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>© <span id="year"></span> Maher — Strength & Mobility Coaching</p>
  </div>
</footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();
  
  // Client Progress Carousel - Load from testimonials.json
  (function() {
    const carouselTrack = document.getElementById('clientProgressCarousel');
    const prevBtn = document.querySelector('.carousel-btn-prev');
    const nextBtn = document.querySelector('.carousel-btn-next');
    
    if (!carouselTrack) return;
    
    let currentIndex = 0;
    let testimonials = [];
    let totalSlides = 0;
    
    // Check if testimonial has required fields and images
    function isValidTestimonial(testimonial) {
      return testimonial.beforeImage && 
             testimonial.afterImage &&
             testimonial.beforeImage !== "assets/testimonial-placeholder-before.jpg" &&
             testimonial.afterImage !== "assets/testimonial-placeholder-after.jpg";
    }
    
    // Load testimonials and build carousel
    async function loadCarousel() {
      try {
        const response = await fetch('testimonials.json');
        if (!response.ok) {
          throw new Error('Failed to fetch testimonials.json');
        }
        const data = await response.json();
        
        if (!data || !data.testimonials) {
          throw new Error('Invalid JSON structure');
        }
        
        // Filter to only testimonials with before/after images
        testimonials = data.testimonials.filter(isValidTestimonial);
        totalSlides = testimonials.length;
        
        if (totalSlides === 0) {
          carouselTrack.innerHTML = '<p style="color:var(--muted); text-align:center; padding:40px;">No client progress available. Add testimonials with before/after images to testimonials.json</p>';
          return;
        }
        
        // Build carousel slides
        carouselTrack.innerHTML = testimonials.map((testimonial, index) => {
          return `
            <div class="carousel-slide ${index === 0 ? 'active' : ''}">
              <a href="testimonials.html" class="carousel-card-link">
                <div class="carousel-card">
                  <div class="carousel-content">
                    <blockquote class="carousel-quote">${escapeHtml(testimonial.quote)}</blockquote>
                    <div class="carousel-meta">
                      <p class="carousel-name">${escapeHtml(testimonial.name)}</p>
                      <p class="carousel-timeframe">${escapeHtml(testimonial.timeframe)}</p>
                    </div>
                  </div>
                  <div class="carousel-images">
                    <div class="carousel-image">
                      <img src="${testimonial.beforeImage}" alt="Before" onerror="this.parentElement.style.display='none'" />
                      <span class="carousel-label">Before</span>
                    </div>
                    <div class="carousel-image">
                      <img src="${testimonial.afterImage}" alt="After" onerror="this.parentElement.style.display='none'" />
                      <span class="carousel-label">After</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          `;
        }).join('');
        
        // Initialize navigation
        showSlide(0);
      } catch (error) {
        console.error('Error loading carousel:', error);
        // Check if it's a CORS error (file:// protocol)
        if (error.message && error.message.includes('fetch')) {
          carouselTrack.innerHTML = '<p style="color:var(--muted); text-align:center; padding:40px;">Please use a local server to view this page. Try running: <code style="background:var(--neutral); padding:2px 6px;">python3 -m http.server</code> or <code style="background:var(--neutral); padding:2px 6px;">npx serve</code></p>';
        } else {
          carouselTrack.innerHTML = '<p style="color:var(--muted); text-align:center; padding:40px;">Unable to load client progress. Check console for details.</p>';
        }
      }
    }
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    function showSlide(index) {
      const slides = carouselTrack.querySelectorAll('.carousel-slide');
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
      });
      currentIndex = index;
    }
    
    function nextSlide() {
      if (totalSlides === 0) return;
      const next = (currentIndex + 1) % totalSlides;
      showSlide(next);
    }
    
    function prevSlide() {
      if (totalSlides === 0) return;
      const prev = (currentIndex - 1 + totalSlides) % totalSlides;
      showSlide(prev);
    }
    
    // Button event listeners
    if (prevBtn) {
      prevBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        prevSlide();
      });
    }
    
    if (nextBtn) {
      nextBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        nextSlide();
      });
    }
    
    // Load carousel on page load
    loadCarousel();
  })();
  
  // Show welcome popup on every visit
  function showWelcomePopup() {
    const popup = document.getElementById('welcome-popup');
    if (popup) {
      setTimeout(() => {
        popup.style.display = 'flex';
      }, 500); // Small delay for better UX
    }
  }
  
  function closeWelcomePopup() {
    const popup = document.getElementById('welcome-popup');
    if (popup) {
      popup.style.display = 'none';
    }
  }
  
  // Close popup when clicking outside
  window.addEventListener('click', function(e) {
    const popup = document.getElementById('welcome-popup');
    if (e.target === popup) {
      closeWelcomePopup();
    }
  });
  
  // Show popup when page loads
  showWelcomePopup();
</script>

<script src="script.js"></script>

</body>
</html>
